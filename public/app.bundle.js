!function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],h=0,d=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);d.length;)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={0:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;r.push([250,1]),a()}({250:function(e,t,a){e.exports=a(630)},630:function(e,t,a){"use strict";a.r(t);a(251),a(618),a(619);var n=a(0),s=a.n(n),r=a(47),i=a.n(r),o=a(69),l=a(645),u=a(648),c=a(644),h=a(70),d=a(28),m=a(245),p=a(649),f=a(643),g=a(248),v=a(635),E=a(636),b=a(637),y=a(249);class w extends s.a.Component{constructor(e){var t=e.location.search;super();var a=new URLSearchParams(t);this.state={status:a.get("status")||"",effortMin:a.get("effortMin")||"",effortMax:a.get("effortMax")||"",changed:!1},this.onChangeStatus=this.onChangeStatus.bind(this),this.applyFilter=this.applyFilter.bind(this),this.showOriginalFilter=this.showOriginalFilter.bind(this),this.onChangeEffortMin=this.onChangeEffortMin.bind(this),this.onChangeEffortMax=this.onChangeEffortMax.bind(this)}componentDidUpdate(e){e.location.search!==this.props.location.search&&this.showOriginalFilter()}onChangeStatus(e){var t=e.target.value;this.setState({status:t,changed:!0})}onChangeEffortMin(e){e.target.value.match(/^\d*$/)&&this.setState({effortMin:e.target.value,changed:!0})}onChangeEffortMax(e){e.target.value.match(/^\d*$/)&&this.setState({effortMax:e.target.value,changed:!0})}showOriginalFilter(){var e=this.props.location.search,t=new URLSearchParams(e);this.setState({status:t.get("status")||"",effortMin:t.get("effortMin")||"",effortMax:t.get("effortMax")||"",changed:!1})}applyFilter(){var e=this.state,t=e.status,a=e.effortMin,n=e.effortMax,s=this.props.history,r=new URLSearchParams;t&&r.set("status",t),a&&r.set("effortMin",a),n&&r.set("effortMax",n);var i=r.toString()?"?".concat(r.toString()):"";s.push({pathname:"/issues",search:i})}render(){var e=this.state,t=e.status,a=e.changed,n=this.state,r=n.effortMin,i=n.effortMax;return s.a.createElement(f.a,null,s.a.createElement(f.a.Row,null,s.a.createElement(f.a.Group,{as:g.a,xs:6,sm:4,md:3,lg:2},s.a.createElement(f.a.Label,null,"Status:"),s.a.createElement(f.a.Control,{as:"select",value:t,onChange:this.onChangeStatus},s.a.createElement("option",{value:""},"(All)"),s.a.createElement("option",{value:"New"},"New"),s.a.createElement("option",{value:"Assigned"},"Assigned"),s.a.createElement("option",{value:"Fixed"},"Fixed"),s.a.createElement("option",{value:"Closed"},"Closed"))),s.a.createElement(f.a.Group,{as:g.a,xs:6,sm:4,md:3,lg:2},s.a.createElement(f.a.Label,null,"Effect Between:"),s.a.createElement(v.a,null,s.a.createElement(f.a.Control,{value:r,onChange:this.onChangeEffortMin}),s.a.createElement(v.a.Text,null,"-"),s.a.createElement(f.a.Control,{value:i,onChange:this.onChangeEffortMax}))),s.a.createElement(g.a,{xs:6,sm:4,md:3,lg:2},s.a.createElement(f.a.Label,null,"Â "),s.a.createElement(E.a,null,s.a.createElement(b.a,{className:"mr-2"},s.a.createElement(y.a,{variant:"primary",onClick:this.applyFilter,size:"sm"},"Apply")),s.a.createElement(b.a,null,s.a.createElement(y.a,{variant:"secondary",onClick:this.showOriginalFilter,disabled:!a},"Reset"))))))}}var C=Object(d.o)(w),O=a(638),S=a(647),x=a(639),M=a(98),j=Object(d.o)(e=>{var t=e.issue,a=e.location.search,n=e.closeIssue,r=e.deleteIssue,i=e.index,o={pathname:"/issues/".concat(t.id),search:a},l=s.a.createElement(O.a,{id:"close-tooltip",placement:"top"},"Edit Issue"),u=s.a.createElement(O.a,{id:"close-tooltip",placement:"top"},"Close Issue"),c=s.a.createElement(O.a,{id:"delete-tooltip",placement:"top"},"Delete Issue");var d=s.a.createElement("tr",null,s.a.createElement("td",null,t.id),s.a.createElement("td",null,t.status),s.a.createElement("td",null,t.owner),s.a.createElement("td",null,t.created.toDateString()),s.a.createElement("td",null,t.effort),s.a.createElement("td",null,t.due?t.due.toDateString():" "),s.a.createElement("td",null,t.title),s.a.createElement("td",null,s.a.createElement(S.a,{delayShow:1e3,overlay:l},s.a.createElement(h.LinkContainer,{to:"/edit/".concat(t.id)},s.a.createElement(y.a,{size:"sm",variant:"outline-secondary"},s.a.createElement(M.a,null))))," ",s.a.createElement(S.a,{delayShow:1e3,overlay:u},s.a.createElement(y.a,{size:"sm",variant:"outline-secondary",onClick:function(e){e.preventDefault(),n(i)}},s.a.createElement(M.c,null)))," ",s.a.createElement(S.a,{delayShow:1e3,overlay:c},s.a.createElement(y.a,{size:"sm",variant:"outline-secondary",onClick:function(e){e.preventDefault(),r(i)}},s.a.createElement(M.d,null)))));return s.a.createElement(h.LinkContainer,{to:o},d)});function I(e){var t=e.issues,a=e.closeIssue,n=e.deleteIssue,r=t.map((e,t)=>s.a.createElement(j,{key:e.id,issue:e,closeIssue:a,deleteIssue:n,index:t}));return s.a.createElement(x.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"ID"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Owner"),s.a.createElement("th",null,"Created"),s.a.createElement("th",null,"Effort"),s.a.createElement("th",null,"Due Date"),s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,r))}function D(e,t,a,n,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function P(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){D(r,n,s,i,o,"next",e)}function o(e){D(r,n,s,i,o,"throw",e)}i(void 0)}))}}var T=new RegExp("^\\d\\d\\d\\d-\\d\\d-\\d\\d");function k(e,t){return T.test(t)?new Date(t):t}function V(e){return $.apply(this,arguments)}function $(){return($=P(regeneratorRuntime.mark((function e(t){var a,n,s,r,i,o,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]?u[2]:null,e.prev=2,e.next=5,fetch(window.ENV.UI_API_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:a})});case 5:return s=e.sent,e.next=8,s.text();case 8:return r=e.sent,(i=JSON.parse(r,k)).errors&&("BAD_USER_INPUT"===(o=i.errors[0]).extensions.code&&(l=o.extensions.exception.errors.join("\n "),n&&n("".concat(o.message,":\n ").concat(l))),n&&n("Wow, something went wrong, please try again later")),e.abrupt("return",i.data);case 14:return e.prev=14,e.t0=e.catch(2),n&&n("Error in sending data: ".concat(e.t0.message)),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}var N=a(646);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function B(e){var t=e.toastType,a=e.toastMessage,n=e.className,r=L(e,["toastType","toastMessage","className"]),i="".concat(n||""," bg-").concat(t);return s.a.createElement(N.a,F({},r,{className:i}),s.a.createElement(N.a.Header,null,s.a.createElement("strong",{className:"mr-auto"},t),s.a.createElement("small",null,"just now")),s.a.createElement(N.a.Body,null,a))}function R(e,t,a,n,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,s)}class U extends s.a.Component{constructor(){super(),this.state={issue:{},toastVisible:!1,toastMessage:"",toastType:"info"},this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){e.match.params.id!==this.props.match.params.id&&this.loadData()}showError(e){console.log("Calling show error"),this.setState({toastVisible:!0,toastMessage:e,toastType:"warning"})}dismissToast(){this.setState({toastVisible:!1})}loadData(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,n=Number(a),e.next=5,V("query issue($id: Int!) {\n      issue (id: $id) {\n        id description\n      }\n    }",{id:n},t.showError);case 5:(s=e.sent)?t.setState({issue:s.issue}):t.setState({issue:{}});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){R(r,n,s,i,o,"next",e)}function o(e){R(r,n,s,i,o,"throw",e)}i(void 0)}))})()}render(){var e=this.state.issue.description,t=this.state,a=t.toastVisible,n=t.toastType,r=t.toastMessage;return s.a.createElement("div",null,s.a.createElement("h3",null,"Description"),s.a.createElement("pre",null,e),s.a.createElement(B,{toastType:n,toastMessage:r,onClose:this.dismissToast,show:a,delay:6e3,autohide:!0}))}}function A(e,t,a,n,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){A(r,n,s,i,o,"next",e)}function o(e){A(r,n,s,i,o,"throw",e)}i(void 0)}))}}class G extends s.a.Component{constructor(){super(),this.state={issues:[],toastVisible:!1,toastMessage:"",toastType:"success"},this.closeIssue=this.closeIssue.bind(this),this.deleteIssue=this.deleteIssue.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){e.location.search!==this.props.location.search&&this.loadData()}deleteIssue(e){var t=this;return _(regeneratorRuntime.mark((function a(){var n,s,r,i,o,l,u,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"mutation issueDelete($id: Int!) {\n      issueDelete(id: $id)\n    }",n=t.state.issues,s=t.props,r=s.location,i=r.pathname,o=r.search,l=s.history,u=n[e].id,a.next=6,V("mutation issueDelete($id: Int!) {\n      issueDelete(id: $id)\n    }",{id:u},t.showError);case 6:(c=a.sent)&&c.issueDelete?t.setState(a=>{var n=[...a.issues];return i==="/issues/".concat(u)&&l.push({pathname:"/issues",search:o}),n.splice(e,1),t.showSuccess("Deleted issue ".concat(u," successfully.")),{issues:n}}):t.loadData();case 8:case"end":return a.stop()}}),a)})))()}closeIssue(e){var t=this;return _(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"mutation issueClose($id: Int!) {\n      issueUpdate(id: $id, changes: { status: Closed }) {\n        id title status owner effort\n        created due description\n      }\n    }",n=t.state.issues,a.next=4,V("mutation issueClose($id: Int!) {\n      issueUpdate(id: $id, changes: { status: Closed }) {\n        id title status owner effort\n        created due description\n      }\n    }",{id:n[e].id},t.showError);case 4:(s=a.sent)?t.setState(a=>{var r=[...a.issues];return r[e]=s.issueUpdate,t.showSuccess("Issue ".concat(n[e].id," was closed successfully")),{issues:r}}):t.loadData();case 6:case"end":return a.stop()}}),a)})))()}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"warning"})}dismissToast(){this.setState({toastVisible:!1})}loadData(){var e=this;return _(regeneratorRuntime.mark((function t(){var a,n,s,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.location.search,n=new m.a(a),s={},n.get("status")&&(s.status=n.get("status")),r=parseInt(n.get("effortMin"),10),Number.isNaN(r)||(s.effortMin=r),i=parseInt(n.get("effortMax"),10),Number.isNaN(i)||(s.effortMax=i),"query issuelist(\n      $status: StatusType\n      $effortMin: Int\n      $effortMax: Int\n    ) {\n      issueList(\n        status: $status\n        effortMin: $effortMin\n        effortMax: $effortMax\n      ) {\n        _id id title status owner\n        created effort due\n      }\n    }",t.next=11,V("query issuelist(\n      $status: StatusType\n      $effortMin: Int\n      $effortMax: Int\n    ) {\n      issueList(\n        status: $status\n        effortMin: $effortMin\n        effortMax: $effortMax\n      ) {\n        _id id title status owner\n        created effort due\n      }\n    }",s,e.showError);case 11:(o=t.sent)&&e.setState({issues:o.issueList});case 13:case"end":return t.stop()}}),t)})))()}render(){var e=this.state.issues,t=this.props.match,a=this.state,n=a.toastMessage,r=a.toastType,i=a.toastVisible;return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,null,s.a.createElement(p.a.Header,null,s.a.createElement(p.a.Title,null,"Filter")),s.a.createElement(p.a.Body,null,s.a.createElement(C,null))),s.a.createElement("hr",null),s.a.createElement(B,{toastType:r,toastMessage:n,onClose:this.dismissToast,show:i,delay:6e3,autohide:!0}),s.a.createElement(I,{issues:e,closeIssue:this.closeIssue,deleteIssue:this.deleteIssue}),s.a.createElement("hr",null),s.a.createElement(d.d,{path:"".concat(t.path,"/:id"),component:U}))}}function H(){return s.a.createElement("div",null,s.a.createElement("h2",null,"View for Issue detail report"))}var q=a(640),z=a(641);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class W extends s.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toString():"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){e.target.value.match(/^\d*$/)&&this.setState({value:e.target.value})}onBlur(e){var t,a=this.props.onChange,n=this.state.value;a(e,(t=parseInt(n,10),Number.isNaN(t)?null:t))}render(){var e=this.state.value;return s.a.createElement("input",J({type:"text"},this.props,{value:e,onBlur:this.onBlur,onChange:this.onChange}))}}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}class Q extends s.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toISOString().substr(0,10):""),focused:!1,valid:!0},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onFocus(){this.setState({focused:!0})}onBlur(e){var t,a=this.state,n=a.value,s=a.valid,r=this.props,i=r.onValidityChange,o=r.onChange,l=(t=new Date(n),Number.isNaN(t.getTime())?null:t),u=""===n||null!=l;u!==s&&i&&i(e,u),this.setState({focused:!1,valid:u}),u&&o(e,l)}onChange(e){e.target.value.match(/^[\d-]*$/)&&this.setState({value:e.target.value})}render(){var e,t=this.state,a=t.valid,n=t.focused,r=t.value,i=this.props,o=i.value,l=(i.onValidityChange,i.className),u=K(i,["value","onValidityChange","className"]),c=n||!a?r:null!=(e=o)?e.toDateString():"",h="".concat(l||""," ").concat(a||n?null:"is-invalid");return s.a.createElement("input",Y({},u,{className:h,value:c,placeholder:n?"yyyy-mm-dd":null,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange}))}}function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}class ae extends s.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t:"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){this.setState({value:e.target.value})}onBlur(e){var t,a=this.props.onChange,n=this.state.value;a(e,0===(t=n).trim().length?null:t)}render(){var e=this.state.value,t=this.props,a=t.tag,n=void 0===a?"input":a,r=te(t,["tag"]);return s.a.createElement(n,Z(Z({},r),{},{value:e,onBlur:this.onBlur,onChange:this.onChange}))}}function ne(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function se(e,t,a,n,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function re(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){se(r,n,s,i,o,"next",e)}function o(e){se(r,n,s,i,o,"throw",e)}i(void 0)}))}}function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ue extends s.a.Component{constructor(){super(),this.state={issue:{},invalidFields:{},showingValidation:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.loadData=this.loadData.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.onValidityChange=this.onValidityChange.bind(this),this.dismissValidation=this.dismissValidation.bind(this),this.showValidation=this.showValidation.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){var t=e.match.params.id;this.props.match.params.id!==t&&this.loadData()}onChange(e,t){var a=e.target,n=a.name,s=a.value,r=void 0===t?s:t;this.setState(e=>({issue:oe(oe({},e.issue),{},{[n]:r})}))}onValidityChange(e,t){var a=e.target.name;this.setState(e=>{var n=oe(oe({},e.invalidFields),{},{[a]:!t});return t&&delete n[a],{invalidFields:n}})}handleSubmit(e){var t=this;return re(regeneratorRuntime.mark((function a(){var n,s,r,i,o,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.showValidation(),n=t.state,s=n.issue,r=n.invalidFields,0===Object.keys(r).length){a.next=5;break}return a.abrupt("return");case 5:return"mutation issueUpdate(\n      $id: Int!\n      $changes: IssueUpdateInputs!\n    ) {\n      issueUpdate(\n        id: $id\n        changes: $changes\n    ) {\n      id title status owner\n      effort created due description\n      } \n    }",i=s.id,s.created,o=ne(s,["id","created"]),a.next=9,V("mutation issueUpdate(\n      $id: Int!\n      $changes: IssueUpdateInputs!\n    ) {\n      issueUpdate(\n        id: $id\n        changes: $changes\n    ) {\n      id title status owner\n      effort created due description\n      } \n    }",{id:i,changes:o},t.showError);case 9:(l=a.sent)&&(t.setState({issue:l.issueUpdate}),t.showSuccess("issue updated!"));case 11:case"end":return a.stop()}}),a)})))()}loadData(){var e=this;return re(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"query issue($id: Int!) {\n      issue(id: $id) {\n        id title status owner effort created due description\n      }\n    }",a=e.props.match.params.id,n=Number(a),t.next=5,V("query issue($id: Int!) {\n      issue(id: $id) {\n        id title status owner effort created due description\n      }\n    }",{id:n},e.showError);case 5:s=t.sent,e.setState({issue:s?s.issue:{},invalidFields:{}});case 7:case"end":return t.stop()}}),t)})))()}showValidation(){this.setState({showingValidation:!0})}dismissValidation(){this.setState({showingValidation:!1})}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"warning"})}dismissToast(){this.setState({toastVisible:!1})}render(){var e=this.state.issue.id,t=this.props.match.params.id;if(null==e)return null!=t?s.a.createElement("h3",null,"Issue with ID ".concat(t," not found.")):null;var a,n=this.state.issue,r=n.title,i=n.status,o=this.state.issue,l=o.owner,u=o.effort,c=o.description,d=this.state.issue,m=d.created,v=d.due,w=this.state,C=w.invalidFields,O=w.showingValidation;0!==Object.keys(C).length&&O&&(a=s.a.createElement(q.a,{variant:"danger",dismissible:!0,onClose:this.dismissValidation},s.a.createElement(q.a.Heading,null,"Oh snap! You got an error!"),s.a.createElement("p",null,"Please check invalid field before submitting.")));var S=this.state,x=S.toastVisible,M=S.toastMessage,j=S.toastType,I=s.a.createElement(B,{toastType:j,toastMessage:M,onClose:this.dismissToast,show:x,delay:6e3,autohide:!0});return s.a.createElement(p.a,null,s.a.createElement(p.a.Header,null,s.a.createElement(p.a.Title,null,"Editing issue: ".concat(e))),I,s.a.createElement(p.a.Body,null,s.a.createElement(f.a,{onSubmit:this.handleSubmit},a,s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Created"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{plaintext:!0,readOnly:!0,defaultValue:m.toDateString()}))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Status"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:"select",defaultValue:i,onChange:this.onChange},s.a.createElement("option",{value:"New"},"New"),s.a.createElement("option",{value:"Assigned"},"Assigned"),s.a.createElement("option",{value:"Fixed"},"Fixed"),s.a.createElement("option",{value:"Closed"},"Closed")))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Owner"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:ae,name:"Owner",value:l,onChange:this.onChange,key:e}))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Effort"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:W,name:"effort",value:u,onChange:this.onChange,key:e}))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Due"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:Q,name:"due",value:v,onChange:this.onChange,onValidityChange:this.onValidityChange,key:e}),s.a.createElement(f.a.Control.Feedback,{type:"invalid"},"Please input a valid date"))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Title"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:ae,name:"title",value:r,onChange:this.onChange,key:e}))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(f.a.Label,{column:!0,sm:3},"Description"),s.a.createElement(g.a,{sm:9},s.a.createElement(f.a.Control,{as:ae,tag:"textarea",rows:8,cols:50,name:"description",value:c,onChange:this.onChange,key:e}))),s.a.createElement(f.a.Group,{as:z.a},s.a.createElement(g.a,{sm:{span:6,offset:3}},s.a.createElement(E.a,null,s.a.createElement(b.a,{className:"mr-2"},s.a.createElement(y.a,{type:"submit"},"Submit")),s.a.createElement(b.a,null,s.a.createElement(h.LinkContainer,{to:"/issues"},s.a.createElement(y.a,{variant:"link"},"Back")))))))))}}var ce=()=>s.a.createElement("h1",null,"Page not found");function he(){return s.a.createElement(d.g,null,s.a.createElement(d.c,{exact:!0,from:"/",to:"/issues"}),s.a.createElement(d.d,{path:"/issues",component:G}),s.a.createElement(d.d,{path:"/report",component:H}),s.a.createElement(d.d,{path:"/edit/:id",component:ue}),s.a.createElement(d.d,{component:ce}))}var de=a(642),me=a(247);function pe(e,t,a,n,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,s)}class fe extends s.a.Component{constructor(e){super(e),this.state={showing:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.handleSubmit=this.handleSubmit.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this),this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this)}showModal(){this.setState({showing:!0})}hideModal(){this.setState({showing:!1})}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"warning"})}dismissToast(){this.setState({toastVisible:!1})}handleSubmit(e){var t,a=this;return(t=regeneratorRuntime.mark((function t(){var n,s,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=document.forms.issueAdd,s={owner:n.owner.value,title:n.title.value,due:new Date((new Date).getTime()+864e6)},a.hideModal(),t.next=7,V("mutation issueAdd($issue: IssueInputs!) {\n      issueAdd(issue: $issue) {\n        id\n      }\n    }",{issue:s},a.showError);case 7:(r=t.sent)&&(i=a.props.history,a.showSuccess("Issue added, please add more details"),i.push("/edit/".concat(r.issueAdd.id)));case 9:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(e){pe(r,n,s,i,o,"next",e)}function o(e){pe(r,n,s,i,o,"throw",e)}i(void 0)}))})()}render(){var e=this.state.showing,t=this.state,a=t.toastVisible,n=t.toastType,r=t.toastMessage,i=s.a.createElement(B,{toastType:n,toastMessage:r,onClose:this.dismissToast,show:a,delay:6e3,autohide:!0});return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a.Link,{onClick:this.showModal},s.a.createElement(S.a,{placement:"left",delayShow:1e3,overlay:s.a.createElement(O.a,{id:"create-issue"},"Create Issue")},s.a.createElement(M.b,null))),s.a.createElement(de.a,{show:e,onHide:this.hideModal,backdrop:"static",keyboard:!1},s.a.createElement(de.a.Header,{closeButton:!0},s.a.createElement(de.a.Title,null,"Create Issue")),s.a.createElement(de.a.Body,null,s.a.createElement(f.a,{name:"issueAdd"},s.a.createElement(me.a,null,s.a.createElement(f.a.Label,null,"Title"),s.a.createElement(f.a.Control,{name:"title",autoFocus:!0})),s.a.createElement(me.a,null,s.a.createElement(f.a.Label,null,"Owner"),s.a.createElement(f.a.Control,{name:"owner"})))),s.a.createElement(de.a.Footer,null,s.a.createElement(y.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),s.a.createElement(y.a,{variant:"primary",onClick:this.handleSubmit},"Submit"))),i)}}var ge=Object(d.o)(fe);function ve(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{expand:"md",bg:"light",variant:"light"},s.a.createElement(l.a.Brand,null,"Issue Tracker"),s.a.createElement(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),s.a.createElement(l.a.Collapse,{id:"responsive-navbar-nav"},s.a.createElement(u.a,{className:"mr-auto"},s.a.createElement(h.LinkContainer,{exact:!0,to:"/"},s.a.createElement(u.a.Link,null,"Home")),s.a.createElement(h.LinkContainer,{to:"/issues"},s.a.createElement(u.a.Link,null,"Issue List")),s.a.createElement(h.LinkContainer,{to:"/report"},s.a.createElement(u.a.Link,null,"Report"))),s.a.createElement(u.a,null,s.a.createElement(ge,null),s.a.createElement(c.a,{title:"More",id:"user-dropdown"},s.a.createElement(c.a.Item,null,"About"))))))}function Ee(){return s.a.createElement("small",null,s.a.createElement("p",{className:"text-center"},'Book project of "MERN" book.'))}function be(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(ve,null),s.a.createElement("div",{className:"container-fluid mt-2"},s.a.createElement(he,null)),s.a.createElement(Ee,null))}var ye=s.a.createElement(o.BrowserRouter,null,s.a.createElement(be,null));i.a.render(ye,document.getElementById("contents"))}});
//# sourceMappingURL=app.bundle.js.map